<!DOCTYPE html>
<html>
	<head>
		<title>Real Estate Search</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>
		<style>
			body{
				background-image: url("http://www.neovisual.cz/files/V0779-d9.jpg");
			}

			.error{
				color: red;
				text-align: right;
			}

			.form-group{
				height:60px;
				padding-right:20px;
				color:#F0AD4E;

			}

			.table-responsive{
				padding-left:20px;
				padding-right: 20px;
				background-color: #FFFFFF;
				border-bottom-right-radius: 4px;
				border-bottom-left-radius: 4px;
			}

			table#basic-info tr:nth-child(even) {
			    background-color: #F8F8F8;
			}

			table#basic-info tr:nth-child(odd) {
			   background-color:#FFFFFF;
			}

			#carousel-example-generic{
				background-color: #FFFFFF;
				border-color: #FFFFFF;
				border-style: solid;
				border-bottom-right-radius: 4px;
				border-bottom-left-radius: 4px;
				border-width: 2px;
			}

			.carousel-caption{
				padding-top: 5px;
				right: 0%;
				left: 0%;
				bottom: 0%;
    			background: rgba(0,0,0,0.5);
				height:auto;
			}

			.carousel-caption h4{
				margin-top:0px;
				margin-bottom:0px;
				margin-left:20px;
				margin-right:0px;
				text-align:left;
  				/*font-size: 2.7vh;*/
				/*font-weight: bold;*/
			}

			.carousel-caption p{
				margin-top:0px;
				margin-bottom:0px;
				margin-left:20px;
				margin-right:0px;
				text-align:left;
				/*font-size: 2vmin;*/
				font-size:12px;
				/*font-size:1vw;*/
			}

			.carousel-indicators {
				position:absolute;
				left:-10%;
				margin:0px;
				padding: 0px;
				text-align: right;
				width:100%;
				bottom:5%;
			}

			.carousel-indicators li {
			  border-color: #F0AD4E;
			}

			.carousel-indicators .active {
			  background-color: #F0AD4E;
			}

			.nav-tabs > li > a,
        	.nav-tabs > li > a:hover,
        	.nav-tabs > li > a:focus {
        		/*border: 1px solid rgba(240, 173, 78, 0.5);*/
        		box-shadow: 0px 0px 5px #F0AD4E;
        		background: rgba(240, 173, 78, 0.9);
				color:#FFFFFF;
        	}

			.nav-tabs > li.active > a,
        	.nav-tabs > li.active > a:hover,
        	.nav-tabs > li.active > a:focus {
        		box-shadow: 0px 0px 5px #F0AD4E;
        		/*border: 1px solid rgba(240, 173, 78, 0.5);*/
        		background: rgba(255, 255, 255, 1);
        		color:#000000;
        	}
		
			.container h2 {
				color:#F0AD4E;
			}

			.tab-content {
				/*border: 1px solid rgba(240, 173, 78, 1);*/
				box-shadow: 0px 0px 5px #F0AD4E;
				border-bottom-right-radius: 6px;
				border-bottom-left-radius: 6px;
			}

			#errorMsg {
				margin-top:-40px;
				text-align: center;
				color:red;
				font-size: 20px;
			}
		</style>
	</head>
	<body>
		<!--Facebook Stuff Starts -->
		<div id="fb-root"></div>
	    <script>
	    	// console.log("Running");
	    	window.fbAsyncInit = function() {
	    		// console.log("in fbasync");
	    	    FB.init({
	    	        appId      : '365737193604006',
	    	        xfbml      : true,
	    	        version    : 'v2.1'
	    	    });
		    };
			(function(d, s, id){
			 	var js, fjs = d.getElementsByTagName(s)[0];
			 	if (d.getElementById(id)) {return;}
			 	js = d.createElement(s); js.id = id;
			 	js.src = "//connect.facebook.net/en_US/sdk.js";
			 	fjs.parentNode.insertBefore(js, fjs);
			}(document, 'script', 'facebook-jssdk'));
	    </script>
	    <!--Facebook Stuff ends -->
		<div class = "container">
			<h2>Search Your Property Here</h2>
			<br />
			<form class="form-inline" role="form">
			 	<div class="form-group">
			    	<label for="address">Street Address*:&nbsp;</label>
			    	<input type="text" class="form-control" placeholder="Address" id="streetInput" name="streetInput" autocomplete="on"/>	
			  	</div>
			  	<div class="form-group">
			    	<label for="city">City*:&nbsp;</label>
			    	<input type="text" class="form-control" placeholder="City" id="cityInput" name="cityInput" autocomplete="on"/>
			  	</div>
			  	<div class="form-group">
			  		<label for="state">State*:&nbsp;</label>
			  		<select type="state" class="form-control" id="stateInput" name="stateInput"/>
			  		<option value="" selected="selected"></option>
					<option value="AL">AL</option>
					<option value="AK">AK</option>
					<option value="AZ">AZ</option>
					<option value="AR">AR</option>
					<option value="CA">CA</option>
					<option value="CO">CO</option>
					<option value="CT">CT</option>
					<option value="DE">DE</option>
					<option value="DC">DC</option>
					<option value="FL">FL</option>
					<option value="GA">GA</option>
					<option value="HI">HI</option>
					<option value="ID">ID</option>
					<option value="IL">IL</option>
					<option value="IN">IN</option>
					<option value="IA">IA</option>
					<option value="KS">KS</option>
					<option value="KY">KY</option>
					<option value="LA">LA</option>
					<option value="MA">MA</option>
					<option value="MD">MD</option>
					<option value="ME">ME</option>
					<option value="MI">MI</option>
					<option value="MN">MN</option>
					<option value="MO">MO</option>
					<option value="MS">MS</option>
					<option value="MT">MT</option>
					<option value="NC">NC</option>
					<option value="ND">ND</option>
					<option value="NE">NE</option>
					<option value="NH">NH</option>
					<option value="NJ">NJ</option>
					<option value="NM">NM</option>
					<option value="NV">NV</option>
					<option value="NY">NY</option>
					<option value="OH">OH</option>
					<option value="OK">OK</option>
					<option value="OR">OR</option>
					<option value="PA">PA</option>
					<option value="RI">RI</option>
					<option value="SC">SC</option>
					<option value="SD">SD</option>
					<option value="TN">TN</option>
					<option value="TX">TX</option>
					<option value="UT">UT</option>
					<option value="VA">VA</option>
					<option value="VT">VT</option>
					<option value="WA">WA</option>
					<option value="WI">WI</option>
					<option value="WV">WV</option>
					<option value="WY">WY</option>
				  	</select>
			  	</div>
			  	<div class="form-group">	
			  		<input type="submit" name="submit" value="Submit" class="btn btn-warning">
			  	</div>
			  	<div class="form-group" style="float:right">
			  		<a href="https://www.zillow.com"><img src="http://www.zillow.com/widgets/GetVersionedResource.htm?path=/static/logos/Zillowlogo_150x40_rounded.gif" width="150" height="40" alt="Zillow Real Estate Search" /></a>
			  	</div>
			</form>
		</div>
		<div class="container" style="margin-top:20px;">
			<hr />
		</div>
		<div class="container" id="tabs" style="margin-top:40px;"></div>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
		<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.1/jquery.validate.min.js"></script>
	    <script>
	    	function commaFormattedNum(str){
	    		return parseFloat(str).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
	    	}

	    	function toCurrencyFormat(str){
	    		return '$'+ parseFloat(str).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
	    	}

	    	$('document').ready(function(){
	    		$('.form-inline').validate({	
	    		  	rules: {
	    		  		streetInput : 'required',
	    		  		cityInput   : 'required',
	    		  		stateInput  : 'required'
	    		  	},
	    		 	highlight: function(element) {
	    		        $(element).closest('.form-group').addClass('has-error');      
	    		  	},
    		        unhighlight: function(element) {
    		            $(element).closest('.form-group').removeClass('has-error');
    		        },
	    		    errorElement : 'div',
	    		    errorClass : 'error',
	    		    submitHandler: function(form){
	    		    	$.ajax({
			    			url: 'http://sahilshah.elasticbeanstalk.com',
			    			type: 'GET',
			    			dataType: 'json',
			    			data: {
			    				streetInput : $('#streetInput').val(),
			    				cityInput   : $('#cityInput').val(),
			    				stateInput  : $('#stateInput').val()
			    			},
			    			success: function(data){
			    				// console.log(data);
								result = null;
								if(data.message.code != 0){
									var htmlresult = "";
									htmlresult += "<div id='errorMsg'>No exact match found--Verify that the given address is correct.</div>"
									document.getElementById("tabs").innerHTML=htmlresult;
								}
								if($.isArray(data.response.results.result))
									result = data.response.results.result[0];
								else
									result = data.response.results.result;
			    				var address     = result.address;
			    				    street      = address.street;
			    				    city        = address.city;
			    				    state       = address.state;
			    				var zipcode     = address.zipcode;				  
			    				    homedetails = result.links.homedetails;
			    				var propType    = result.useCode;
			    				if(!propType)
			    					propType = "N/A";

			    				var yearBuilt   = result.yearBuilt;
			    				if(!yearBuilt)
			    					yearBuilt = "N/A";

			    				var lotSizeSqFt = result.lotSizeSqFt;
			    				if(!lotSizeSqFt || lotSizeSqFt=="")
			    					lotSizeSqFt = "N/A";
			    				else
			    					lotSizeSqFt = commaFormattedNum(lotSizeSqFt) + " sq. ft.";

			    				var finishedSqFt = result.finishedSqFt;
			    				if(!finishedSqFt || finishedSqFt=="")
			    					finishedSqFt = "N/A";
			    				else
			    					finishedSqFt = commaFormattedNum(finishedSqFt)  + " sq. ft.";
			    				
			    				var bathrooms = result.bathrooms;
			    				if(!bathrooms || bathrooms=="")
			    					bathrooms = "N/A";
			    				else
			    					bathrooms = parseFloat(bathrooms).toString();

			    				var bedrooms = result.bedrooms;
			    				if(!bedrooms)
			    					bedrooms = "N/A"

			    				var taxAssessmentYear = result.taxAssessmentYear;
			    				if(!taxAssessmentYear)
			    					taxAssessmentYear = "N/A";

			    				var taxAssessment = result.taxAssessment;
			    				if(!taxAssessment || taxAssessment=="")
			    					taxAssessment = "N/A";
			    				else
			    				    taxAssessment = "N/A";

			    				lastSoldPrice = result.lastSoldPrice;
			    				if(!lastSoldPrice || lastSoldPrice=="" || lastSoldPrice=='0.00')
			    					lastSoldPrice = "N/A";
			    				else
			    					lastSoldPrice = toCurrencyFormat(lastSoldPrice);

			    				var lastSoldDate = result.lastSoldDate;
			    				if(!lastSoldDate || lastSoldDate=="" || lastSoldDate=='01-Jan-1970')
			    					lastSoldDate = "N/A";
			    				else{
			    					var d = new Date(lastSoldDate);
			    					var months = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
			    					lastSoldDate = d.getDate() + "-" + months[d.getMonth()] + "-" + d.getFullYear();
			    				}

			    				var amount = result.zestimate.amount;
			    				if(!amount || amount=="")
			    					amount = "N/A";
			    				else
			    					amount = toCurrencyFormat(amount);

			    				var lastUpdated = result.zestimate['last-updated'];
			    				if(!lastUpdated || lastUpdated=="")
			    					lastUpdated = "N/A";
			    				else{
			    					var d = new Date(lastUpdated);
			    					var months = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
			    					lastUpdated = d.getDate() + "-" + months[d.getMonth()] + "-" + d.getFullYear();
			    				}
			    				
			    				var valueChange = result.zestimate.valueChange;
			    				if(!valueChange)
			    					valueChange = "N/A";

			    				var down_arrow = "http://cs-server.usc.edu:45678/hw/hw6/down_r.gif";
			    				var up_arrow = "http://cs-server.usc.edu:45678/hw/hw6/up_g.gif";
			    				
			    				var valueChange_f = "";
			    				valueChange_fb = ""
			    				if(valueChange=="N/A"){
			    					valueChange_f  = "N/A";
			    					valueChange_fb = "N/A"; 
			    				}		
			    				else{
			    					valueChange_f = toCurrencyFormat(Math.abs(valueChange));
			    					if(valueChange>0)
			    						valueChange_fb = toCurrencyFormat(valueChange);
			    					if(valueChange<0)
			    						valueChange_fb = '-' + toCurrencyFormat(Math.abs(valueChange));
			    					if(valueChange==0)
			    						valueChange_fb = '$0.00';
			    				}

			    				var valuationRangeLow = result.zestimate.valuationRange.low;
			    				if(!valuationRangeLow || valuationRangeLow=="")
			    					valuationRangeLow = "N/A";
			    				else
			    					valuationRangeLow = toCurrencyFormat(valuationRangeLow);

			    				var valuationRangeHigh = result.zestimate.valuationRange.high;
			    				if(!valuationRangeHigh || valuationRangeHigh=="")
			    					valuationRangeHigh = "N/A";
			    				else
			    					valuationRangeHigh = toCurrencyFormat(valuationRangeHigh);

			    				var rentAmount = result.rentzestimate.amount;
			    				if(!rentAmount || rentAmount=="")
			    					rentAmount = "N/A";
			    				else
			    					rentAmount = toCurrencyFormat(rentAmount);

			    				var rentLastUpdated = result.rentzestimate['last-updated'];
			    				if(!rentLastUpdated || rentLastUpdated=="")
			    					rentLastUpdated = "N/A";
			    				else{
			    					var d = new Date(rentLastUpdated);
			    					var months = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
			    					rentLastUpdated = d.getDate() + "-" + months[d.getMonth()] + "-" + d.getFullYear();
			    				}

			    				var rentValueChange = result.rentzestimate.valueChange;
			    				if(!rentValueChange || rentValueChange=="")
			    					rentValueChange = "N/A";

			    				var rentValueChange_f = "";
			    				if(rentValueChange=="N/A")
			    					rentValueChange_f = "N/A";
			    				else
			    					rentValueChange_f = toCurrencyFormat(Math.abs(rentValueChange));

			    				var rentValuationRangeLow = result.rentzestimate.valuationRange.low;
			    				if(!rentValuationRangeLow || rentValuationRangeLow=="")
			    					rentValuationRangeLow = "N/A";
			    				else
			    					rentValuationRangeLow = toCurrencyFormat(rentValuationRangeLow);
			    		
			    				var rentValuationRangeHigh = result.rentzestimate.valuationRange.high;
			    				if(!rentValuationRangeHigh || rentValuationRangeHigh=="")
			    					rentValuationRangeHigh = "N/A";
			    				else
			    					rentValuationRangeHigh = toCurrencyFormat(rentValuationRangeHigh);

			    				addr    = street + ", " + city + ", " + state + "-" + zipcode;
			    				zpid    = result.zpid;
			    				// console.log(zpid);
			    				imglink = "http://www.zillow.com/app?chartDuration=1year&chartType=partner&height=300&page=webservice%2FGetChart&service=chart&showPercent=true&width=600&zpid=" + zpid;
			    				desc    = 'Last Sold Price: ' + lastSoldPrice + ' ' + '30 Days Overall Change: ' + valueChange_fb; 
			    				var htmlresult = "";
			    				htmlresult += 	"<ul class='nav nav-tabs' role='tablist' id='myTab'> \
			    									<li class='active'><a href='#Basic-Info' role='tab' data-toggle='tab'>Basic Info</a></li> \
			    									<li><a href='#chart' id='tab-chart' role='tab' data-toggle='tab'>Historical Zestimates</a></li> \
			    								</ul>"
			    				htmlresult +=	"<div class='tab-content'> \
			    									<div class='tab-pane fade in active' id='Basic-Info'> \
			    										<div id='tableDiv' class='table-responsive'> \
			    											<table id='basic-info' class='table table-striped'> \
			    												<tr style='height:20px'></tr> \
			    												<tr> \
			    													<td class='align-left' colspan='3'>See more details for <a href='" + homedetails + "' class='toZillow'>" + street + ", " + city + ", " + state + "-" + zipcode +"</a> on Zillow </td>\
			    													<td class='align-right' style='text-align:right'><a href=\"javascript:fb_post();\"> \
			    														<img src='http://static.excelined.org/wp-content/uploads/Share-on-Facebook.png' style='width:210px;height:50px;'> \
			    													</a> \
			    													</td> \
			    												</tr> \
			    												<tr> \
			    													<td class='align-left'>Property Type:</td> \
			    													<td class='align-right'>" + propType + "</td> \
			    													<td class='align-left'>Last Sold Price:</td> \
			    													<td class='align-right' style='text-align:right'>" + lastSoldPrice + "</td> \
			    												</tr> \
			    												<tr> \
			    													<td class='align-left'>Year Built:</td> \
			    													<td class='align-right'>" + yearBuilt + "</td> \
			    													<td class='align-left'>Last Sold Date:</td> \
			    													<td class='align-right' style='text-align:right'>" + lastSoldDate + "</td> \
			    												</tr> \
			    												<tr> \
			    													<td class='align-left'>Lot Size:</td> \
			    													<td class='align-right'>" + lotSizeSqFt + "</td> \
			    													<td class='align-left'>Zestimate <sup>&reg;</sup> Property Estimate as of " + lastUpdated + ":</td> \
			    													<td class='align-right' style='text-align:right'>" + amount + "</td> \
			    												</tr> \
			    												<tr> \
			    													<td class='align-left'>Finished Area:</td> \
			    													<td class='align-right'>" + finishedSqFt + "</td>";
			    													if(valueChange>0){
			    														htmlresult += "<td class='align-left'>30 Days Overall Change <img src='" + up_arrow + "'></img>:</td>";
			    													}
			    													if(valueChange<0){
			    														htmlresult += "<td class='align-left'>30 Days Overall Change <img src='" + down_arrow + "'></img>:</td>";
			    													}
			    													if(valueChange==0){
			    														htmlresult += "<td class='align-left'>30 Days Overall Change:</td>";
			    													}
			    				htmlresult +=  						"<td class='align-right' style='text-align:right'>" + valueChange_f + "</td> \
			    												</tr> \
			    												<tr> \
																	<td class='align-left'>Bathrooms:</td> \
			    													<td class='align-right'>" + bathrooms + "</td> \
			    													<td class='align-left'>All Time Property Range:</td>";
			    													if(valuationRangeLow!="N/A" && valuationRangeHigh!="N/A"){
			    				htmlresult +=							"<td class='align-right' style='text-align:right'>" + valuationRangeLow + " - " + valuationRangeHigh + "</td></tr>";
			    													}
			    													else{
			    				htmlresult +=							"<td class='align-right' style='text-align:right'>N/A</td>";										
			    													}
			    				htmlresult +=				   "</tr> \
			    												<tr> \
			    													<td class='align-left'>Bedrooms:</td> \
			    													<td class='align-right'>" + bedrooms + "</td> \
			    													<td class='align-left'>Rent Zestimate <sup>&reg;</sup> Valuation as of " + rentLastUpdated + ":</td> \
			    													<td class='align-right' style='text-align:right'>" + rentAmount + "</td> \
			    												</tr> \
			    												<tr> \
			    													<td class='align-left'>Tax Assessment Year:</td> \
			    													<td class='align-right'>" + taxAssessmentYear + "</td>";
			    													if(rentValueChange>0){
			    				htmlresult +=							"<td class='align-left'>30 Days Rent Change <img src='" + up_arrow +"'></img>:</td>";
			    													}
			    													if(rentValueChange<0){
			    				htmlresult +=							"<td class='align-left'>30 Days Rent Change <img src='" + down_arrow + "'></img>:</td>";
			    													}
			    													if(rentValueChange==0){
			    				htmlresult +=							"<td style='align-left'>30 Days Rent Change:</td>";
			    													}
			    				htmlresult +=					   "<td class='align-right' style='text-align:right'>" + rentValueChange_f + "</td> \
			    												</tr> \
			    												<tr> \
			    													<td class='align-left'>Tax Assessment:</td> \
			    													<td class='align-right'>" + taxAssessment + "</td> \
			    													<td class='align-left'>All Time Rent Range:</td>";
			    													if(rentValuationRangeLow!="N/A" && rentValuationRangeHigh!="N/A") 
			    				htmlresult +=					   		"<td class='align-right' style='text-align:right'>" + rentValuationRangeLow + " - " + rentValuationRangeHigh + "</td>";
			    													else
			    				htmlresult +=							"<td class='align-right' style='text-align:right'>N/A</td>";
			    				htmlresult +=				   "</tr> \
			    											</table> \
			    										</div> \
			    									</div> \
			    									<div class='tab-pane' id='chart'> \
			    										<div id='carousel-example-generic' class='carousel slide' data-ride='carousel'> \
			    										  <ol class='carousel-indicators'> \
			    										    <li data-target='#carousel-example-generic' data-slide-to='0' class='active'></li> \
			    										    <li data-target='#carousel-example-generic' data-slide-to='1'></li> \
			    										    <li data-target='#carousel-example-generic' data-slide-to='2'></li> \
			    										  </ol> \
			    										  <div class='carousel-inner' role='listbox'> \
			    										    <div class='item active'> \
			    										      <img style='margin-left:auto;margin-right:auto;' src='http://www.zillow.com/app?chartDuration=1year&chartType=partner&height=300&page=webservice%2FGetChart&service=chart&showPercent=true&width=600&zpid=" + zpid + "' alt='chart 1 year' class='img-responsive'> \
			    										      <div class='carousel-caption'> \
			    										      	<h4>Historical Zestimates for the past 1 year</h4> \
			    										      	<p>" + street + ", " + city + ", " + state + "-" + zipcode + "</p> \
			    										      </div> \
			    										    </div> \
			    										    <div class='item'> \
			    										      <img style='margin-left:auto;margin-right:auto;' src='http://www.zillow.com/app?chartDuration=5years&chartType=partner&height=300&page=webservice%2FGetChart&service=chart&showPercent=true&width=600&zpid=" + zpid + "' alt='chart 5 year' class='img-responsive'> \
			    										      <div class='carousel-caption'> \
			    										      	<h4>Historical Zestimates for the past 5 years</h4> \
			    										      	<p>" + street + ", " + city + ", " + state + "-" + zipcode + "</p> \
				   										    </div> \
			    										    </div> \
			    										    <div class='item'> \
			    										      <img style='margin-left:auto;margin-right:auto;' src='http://www.zillow.com/app?chartDuration=10years&chartType=partner&height=300&page=webservice%2FGetChart&service=chart&showPercent=true&width=600&zpid=" + zpid + "' alt='chart 5 year' class='img-responsive'> \
			    										      <div class='carousel-caption'> \
			    										      	<h4>Historical Zestimates for the past 10 years</h4> \
			    										      	<p>" + street + ", " + city + ", " + state + "-" + zipcode + "</p> \
			    										      </div> \
			    										    </div> \
			    										  </div> \
			    										  <a class='left carousel-control' href='#carousel-example-generic' role='button' data-slide='prev'> \
			    										    <span class='glyphicon glyphicon-chevron-left'></span> \
			    										    <span class='sr-only'>Previous</span> \
			    										  </a> \
			    										  <a class='right carousel-control' href='#carousel-example-generic' role='button' data-slide='next'> \
			    										    <span class='glyphicon glyphicon-chevron-right'></span> \
			    										    <span class='sr-only'>Next</span> \
			    										  </a> \
			    										</div> \
			    									</div> \
			    								</div> \
			    								<div style='text-align:center'> \
			    									<p><div style='color:#FFFFFF'>&copy; Zillow, Inc., 2006-2014. Use is subject to \
															<a href='http://www.zillow.com/corp/Terms.htm' style='color:#F0AD4E'>Terms of Use</a><br> \
															<a href='http://www.zillow.com/wikipages/What-is-a-Zestimate/' style='color:#F0AD4E'>What's a Zestimate?</a> \
														</div> \
													</p> \
												</div>"
			    				document.getElementById("tabs").innerHTML = htmlresult;
			    				$('#tab-chart').click(function(){
			    					$('.carousel').carousel({
			    						interval:4000
			    					});
			    				})
			    			},
			    			error: function(){
			    			}
		    			})
		    			return false;
	    		    }	
	    		    // form.submit();
	    		});
	    		// $('.form-inline').submit(function(){
	    			
	    		// })
	    	})
	    </script>
	    <!--Facebook Stuff Starts -->
	    <script type="text/javascript">
	    	function fb_post(){
			    FB.ui({
			    	method      : 'feed',
			    	name        : addr,
			    	caption     : "Property Information from Zillow.com",
			    	description : 'Last Sold Price: ' + lastSoldPrice + ', ' + '30 Days Overall Change: ' + valueChange_fb,
			    	display     : 'popup',
			    	link        : homedetails,
			    	picture     : imglink,
			    },

			    function(response){
			    	if(response && response.post_id){
			    		alert("Posted Successfully");
			    	}
			    	else{
			    		alert("Not Posted");
			    	}
			    });
			}
	    </script>
	    <!--Facebook Stuff Ends -->
	</body>
</html>